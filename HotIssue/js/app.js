var admob_ios_key="ca-app-pub-3241952602337815/2647907833",admob_android_key="ca-app-pub-3241952602337815/5629360632",admob_wp_key="ca-app-pub-3241952602337815/5601374237",app=angular.module("hotissue",["ionic","ui.router","hotissue.services","hotissue.controllers","ngTranslate","inapp.util"]);app.config(["$compileProvider","$translateProvider",function(t,e){t.imgSrcSanitizationWhitelist("img"),e.translations("en_EN",{RATE_IT:"Rate It!"}),e.translations("ko_KR",{RATE_IT:"평가하기"}),e.uses("ko_KR")}]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("hotissue",{url:"/",templateUrl:"templates/home.html",onEnter:["$rootScope",function(t){t.$broadcast("enterHome")}]}).state("content",{url:"/content",templateUrl:"templates/content.html",onEnter:["$rootScope",function(t){t.$broadcast("enterContent")}]}),e.otherwise("/")}]),angular.module("hotissue.controllers",[]).controller("HotIssueCtrl",["$scope","$ionicActionSheet","$ionicLoading","$ionicScrollDelegate","SiteService","DownloadService","$ionicPopup","$ionicScrollDelegate","$ionicPlatform","$ionicSlideBoxDelegate","$timeout","$state","IMUtil",function(t,e,n,i,r,o,a,i,s,l,c,u,f){function h(){}function d(){json=window.localStorage.getItem("favorites"),t.favorites=JSON.parse(json),t.favorites?t.favoriteCount=t.favorites.length:(t.favorites=[],t.favoriteCount=0)}function p(t){t.length>20&&t.shift(),window.localStorage.setItem("favorites",JSON.stringify(t))}function g(){t.showLoading(),o.download().then(function(e){t.datas=JSON.parse(e).rank,t.sites=r.all(),t.hideLoading()},function(){t.hideLoading();var e=f.showConfirm("실시간 검색어","오류가 발생했습니다. 재시도 하시겠습니까?");e.then(function(t){t===!0?c(g(),1):navigator.app.exitApp()})})}function v(e){t.showLoading(),o.download2(e).then(function(n){null!==n&&"null"!==n?t.item=JSON.parse(n):(t.item.k=e,t.item.v="데이터를 가져오기 실패했습니다. 자세히 보기를 눌러보세요.."),t.hideLoading()},function(n){if(t.hideLoading(),"cancel"!==n){var i=f.showConfirm("실시간 검색어","오류가 발생했습니다. 재시도 하시겠습니까?");i.then(function(t){t===!0?c(v(e),1):navigator.app.exitApp()})}})}t.addFavorite=function(e){var n=5===t.slideIndex?"즐겨찾기에서 삭제하시겠습니까 ?":"즐겨찾기에 추가하시겠습니까 ?",i=f.showConfirm("실시간 검색어",n);i.then(function(n){n===!0&&(5===t.slideIndex?(t.favoriteCount--,t.favorites.splice(e,1),l.update(),p(t.favorites)):(t.favoriteCount++,t.favorites.push(t.datas[e]),l.update(),p(t.favorites)))})},document.addEventListener("backbutton",h,!1),s.ready(function(){t.isPhoneGap=f.getPlatformID(),l.update(),f.adBanner(),d(),c(g(),1)});var b=["naver","daum","google","nate","zum","favorite","setting"],w=["bar-royal","bar-positive","bar-dark","bar-balanced","bar-energized","bar-calm","bar-stable"];t.slideIndex=0,t.maxIndex=6,t.slideTitle=b[t.slideIndex],t.barType="bar-royal",t.favorites=[],t.favoriteCount=0,t.datas=[],t.Devices=f.Const,t.item={},t.itemUrl="",t.isContent=!1,t.isPhoneGap=t.Devices.ID_NONE,t.slidePage=function(e){i.scrollTop(),t.slideTitle=b[e],t.slideIndex=e,t.barType=w[e],t.FavoriteText=5===e?"즐겨찾기":""},t.slideAction=function(){f.getPlatformID()!==f.Const.ID_WP&&t.isContent===!1&&e.show({buttons:[{text:'<img src="img/'+b[0]+'_s.png"/>'},{text:"<img src='img/"+b[1]+"_s.png'/>"},{text:"<img src='img/"+b[2]+"_s.png'/>"},{text:"<img src='img/"+b[3]+"_s.png'/>"},{text:"<img src='img/"+b[4]+"_s.png'/>"},{text:"<img src='img/"+b[5]+".png'/>"}],cancelText:"취소",cancel:function(){},buttonClicked:function(e){return l.slide(e),t.slidePage(e),!0}})},t.isShowLeft=function(){return 0!==t.slideIndex?!1:!0},t.isShowRight=function(){return t.slideIndex!==t.maxIndex?!1:!0},t.slideLeft=function(){i.scrollTop(),l.previous()},t.slideRight=function(){i.scrollTop(),l.next()},t.showLoading=function(){f.showLoading("<div class='padding'><i class='icon ion-loading-a'></i></div>읽어오는중 ..")},t.hideLoading=f.hideLoading,t.openBrowser=function(t){f.openBrowser(t)},t.openBrowser2=function(e){t.item={},t.itemUrl=t.datas[e].url,u.go("content"),c(v(t.datas[e].title),1)},t.openBrowser3=function(){f.openBrowser(t.itemUrl)},t.sendEmail=function(){f.sendFeedBack("Feedback from HotIssue : ")},t.settings=function(){if(window.plugins&&window.plugins.Settings){var t=window.plugins.Settings;t.show(function(){},function(){})}},t.$on("enterContent",function(){t.isContent=!0}),t.$on("enterHome",function(){c(function(){ionic.DomUtil.ready(function(){o.cancel2(),t.isContent=!1,l.slide(t.slideIndex),t.slidePage(t.slideIndex)})})})}]).directive("favorite",["$ionicGesture",function(t){return{restrict:"C",require:"^ngController",link:function(e,n){var i=function(){e.addFavorite(n.attr("data-index"))},r=t.on("hold",i,n);e.$on("$destroy",function(){t.off(r,"hold",i)})}}}]),angular.module("ngTranslate",["ng"]).config(["$provide",function(t){$TranslateProvider=function(){var t,e={};this.translations=function(t,n){if(!t&&!n)return e;if(t&&!n){if(angular.isString(t))return e[t];e=t}else e[t]=n},this.uses=function(n){if(!n)return t;if(!e[n])throw Error("$translateProvider couldn't find translationTable for langKey: '"+n+"'");t=n},this.$get=["$interpolate","$log",function(n,i){return $translate=function(r,o){var a=t?e[t][r]:e[r];return a?n(a)(o):(i.warn("Translation for "+r+" doesn't exist"),r)}}]},t.provider("$translate",$TranslateProvider)}]),angular.module("ngTranslate").directive("translate",["$filter","$interpolate",function(t,e){var n=t("translate");return{restrict:"A",scope:!0,link:function(t,i,r){r.$observe("translate",function(n){t.translationId=angular.equals(n,"")?e(i.text())(t.$parent):n}),r.$observe("values",function(e){t.interpolateParams=e}),t.$watch("translationId + interpolateParams",function(){i.html(n(t.translationId,t.interpolateParams))})}}}]),angular.module("ngTranslate").filter("translate",["$parse","$translate",function(t,e){return function(n,i){return angular.isObject(i)||(i=t(i)()),e(n,i)}}]),angular.module("inapp.util",[]).factory("IMUtil",["$ionicLoading","$ionicPopup","$interval",function(t,e,n){function i(){switch(g){case v.ID_ANDROID:return admob_android_key;case v.ID_IOS:return admob_ios_key;case v.ID_WP:return admob_wp_key;case v.ID_FFOS:}return ID_NONE}function r(){if(window.plugins&&window.plugins.AdMob){var t=i(),e=window.plugins.AdMob;e.createBannerView({publisherId:t,adSize:e.AD_SIZE.SMART_BANNER,bannerAtTop:!1},function(){e.requestAd({isTesting:!1},function(){e.showAd(!0)},function(){console.log("failed to request ad")})},function(){console.log("failed to create banner view")})}else console.log("AdMob plugin not available/ready.")}function o(){if(window.plugins&&window.plugins.AdMob){var t=i(),e=window.plugins.AdMob;e.createInterstitialView({publisherId:t},function(){e.requestInterstitialAd({isTesting:!1},function(){e.showAd(!0)},function(){console.log("failed to request ad")})},function(){console.log("failed to create banner view")})}}function a(t){d(t);var e=n(function(){p(),n.cancel(e)},3e3)}function s(t,n){var i=e.confirm({title:t,template:n});return i}function l(){if("undefined"!=typeof device)switch(device.platform){case"Android":return g=v.ID_ANDROID,v.ID_ANDROID;case"iOS":return g=v.ID_IOS,v.ID_IOS;case"WinCE":case"Win32NT":return g=v.ID_WP,v.ID_WP}return g=v.ID_WEB,v.ID_WEB}function c(t){g===v.ID_WEB?window.open(t):window.open(t,"_system")}function u(t){var e,n,i,r,o,a;for(e="",i=t.length,n=0;i>n;)switch(r=t[n++],r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(r);break;case 12:case 13:o=t[n++],e+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=t[n++],a=t[n++],e+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&a)<<0)}return e}function f(t){for(var e=new Uint8Array(t.length),n=0,i=t.length;i>n;++n)e[n]=t.charCodeAt(n);return e}function h(t){window.plugin&&window.plugin.email?window.plugin.email.isServiceAvailable(function(e){e?window.plugin.email.open({to:["imapp.help@gmail.com"],subject:"Hybrid Feedback",body:t}):c("mailto:imapp.help@gmail.com")}):c("mailto:imapp.help@gmail.com")}function d(e){t.show({content:e,animation:"fade-in",showBackdrop:!0,maxWidth:300,showDelay:500})}function p(){t.hide()}var g,v={ID_NONE:-1,ID_WEB:0,ID_ANDROID:1,ID_IOS:2,ID_WP:3,ID_FFOS:4};return{Const:v,adBanner:r,openBrowser:c,getPlatformID:l,showConfirm:s,adInterstitial:o,ab2str:u,str2ab:f,sendFeedBack:h,showLoading:d,hideLoading:p,toast:a}}]).directive("integer",function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$parsers.push(function(t){if(void 0===t)return"";var e=t.replace(/[^0-9]/g,"");return parseInt(e)<n.min&&(e=n.min),parseInt(e)>n.max&&(e=e.slice(0,-1)),e!==t&&(i.$setViewValue(e),i.$render()),console.log(parseInt(e)+"::"+n.min+":::"+n.max),e})}}}),function(){"use strict";function t(t,e){var n=t.split("."),i=s;!(n[0]in i)&&i.execScript&&i.execScript("var "+n[0]);for(var r;n.length&&(r=n.shift());)n.length||void 0===e?i=i[r]?i[r]:i[r]={}:i[r]=e}function e(t){var e,n,i,r,o,a,s,c,u,f,h=t.length,d=0,p=Number.POSITIVE_INFINITY;for(c=0;h>c;++c)t[c]>d&&(d=t[c]),t[c]<p&&(p=t[c]);for(e=1<<d,n=new(l?Uint32Array:Array)(e),i=1,r=0,o=2;d>=i;){for(c=0;h>c;++c)if(t[c]===i){for(a=0,s=r,u=0;i>u;++u)a=a<<1|1&s,s>>=1;for(f=i<<16|c,u=a;e>u;u+=o)n[u]=f;++r}++i,r<<=1,o<<=1}return[n,d,p]}function n(t,e){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=l?new Uint8Array(t):t,this.m=!1,this.i=u,this.s=!1,(e||!(e={}))&&(e.index&&(this.a=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.s=e.resize)),this.i){case c:this.b=32768,this.c=new(l?Uint8Array:Array)(32768+this.h+258);break;case u:this.b=0,this.c=new(l?Uint8Array:Array)(this.h),this.e=this.A,this.n=this.w,this.j=this.z;break;default:throw Error("invalid inflate mode")}}function i(t,e){for(var n,i=t.f,r=t.d,o=t.input,a=t.a,s=o.length;e>r;){if(a>=s)throw Error("input buffer is broken");i|=o[a++]<<r,r+=8}return n=i&(1<<e)-1,t.f=i>>>e,t.d=r-e,t.a=a,n}function r(t,e){for(var n,i,r=t.f,o=t.d,a=t.input,s=t.a,l=a.length,c=e[0],u=e[1];u>o&&!(s>=l);)r|=a[s++]<<o,o+=8;return n=c[r&(1<<u)-1],i=n>>>16,t.f=r>>i,t.d=o-i,t.a=s,65535&n}function o(t){function n(t,e,n){var o,a,s,l=this.q;for(s=0;t>s;)switch(o=r(this,e)){case 16:for(a=3+i(this,2);a--;)n[s++]=l;break;case 17:for(a=3+i(this,3);a--;)n[s++]=0;l=0;break;case 18:for(a=11+i(this,7);a--;)n[s++]=0;l=0;break;default:l=n[s++]=o}return this.q=l,n}var o,a,s,c,u=i(t,5)+257,f=i(t,5)+1,h=i(t,4)+4,d=new(l?Uint8Array:Array)(g.length);for(c=0;h>c;++c)d[g[c]]=i(t,3);if(!l)for(c=h,h=d.length;h>c;++c)d[g[c]]=0;o=e(d),a=new(l?Uint8Array:Array)(u),s=new(l?Uint8Array:Array)(f),t.q=0,t.j(e(n.call(t,u,o,a)),e(n.call(t,f,o,s)))}function a(t,e){var i,r;switch(this.input=t,this.a=0,(e||!(e={}))&&(e.index&&(this.a=e.index),e.verify&&(this.B=e.verify)),i=t[this.a++],r=t[this.a++],15&i){case E:this.method=E;break;default:throw Error("unsupported compression method")}if(0!==((i<<8)+r)%31)throw Error("invalid fcheck flag:"+((i<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.r=new n(t,{index:this.a,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}var s=this,l="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView,c=0,u=1,f={u:c,t:u};n.prototype.k=function(){for(;!this.m;){var t=i(this,3);switch(1&t&&(this.m=!0),t>>>=1){case 0:var e=this.input,n=this.a,r=this.c,a=this.b,s=e.length,f=void 0,h=void 0,d=r.length,p=void 0;if(this.d=this.f=0,n+1>=s)throw Error("invalid uncompressed block header: LEN");if(f=e[n++]|e[n++]<<8,n+1>=s)throw Error("invalid uncompressed block header: NLEN");if(h=e[n++]|e[n++]<<8,f===~h)throw Error("invalid uncompressed block header: length verify");if(n+f>e.length)throw Error("input buffer is broken");switch(this.i){case c:for(;a+f>r.length;){if(p=d-a,f-=p,l)r.set(e.subarray(n,n+p),a),a+=p,n+=p;else for(;p--;)r[a++]=e[n++];this.b=a,r=this.e(),a=this.b}break;case u:for(;a+f>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(l)r.set(e.subarray(n,n+f),a),a+=f,n+=f;else for(;f--;)r[a++]=e[n++];this.a=n,this.b=a,this.c=r;break;case 1:this.j(D,T);break;case 2:o(this);break;default:throw Error("unknown BTYPE: "+t)}}return this.n()};var h,d,p=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],g=l?new Uint16Array(p):p,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],b=l?new Uint16Array(v):v,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],m=l?new Uint8Array(w):w,y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],I=l?new Uint16Array(y):y,A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=l?new Uint8Array(A):A,$=new(l?Uint8Array:Array)(288);for(h=0,d=$.length;d>h;++h)$[h]=143>=h?8:255>=h?9:279>=h?7:8;var _,S,D=e($),x=new(l?Uint8Array:Array)(30);for(_=0,S=x.length;S>_;++_)x[_]=5;var T=e(x);n.prototype.j=function(t,e){var n=this.c,o=this.b;this.o=t;for(var a,s,l,c,u=n.length-258;256!==(a=r(this,t));)if(256>a)o>=u&&(this.b=o,n=this.e(),o=this.b),n[o++]=a;else for(s=a-257,c=b[s],0<m[s]&&(c+=i(this,m[s])),a=r(this,e),l=I[a],0<k[a]&&(l+=i(this,k[a])),o>=u&&(this.b=o,n=this.e(),o=this.b);c--;)n[o]=n[o++-l];for(;8<=this.d;)this.d-=8,this.a--;this.b=o},n.prototype.z=function(t,e){var n=this.c,o=this.b;this.o=t;for(var a,s,l,c,u=n.length;256!==(a=r(this,t));)if(256>a)o>=u&&(n=this.e(),u=n.length),n[o++]=a;else for(s=a-257,c=b[s],0<m[s]&&(c+=i(this,m[s])),a=r(this,e),l=I[a],0<k[a]&&(l+=i(this,k[a])),o+c>u&&(n=this.e(),u=n.length);c--;)n[o]=n[o++-l];for(;8<=this.d;)this.d-=8,this.a--;this.b=o},n.prototype.e=function(){var t,e,n=new(l?Uint8Array:Array)(this.b-32768),i=this.b-32768,r=this.c;if(l)n.set(r.subarray(32768,n.length));else for(t=0,e=n.length;e>t;++t)n[t]=r[t+32768];if(this.g.push(n),this.l+=n.length,l)r.set(r.subarray(i,i+32768));else for(t=0;32768>t;++t)r[t]=r[i+t];return this.b=32768,r},n.prototype.A=function(t){var e,n,i,r,o=this.input.length/this.a+1|0,a=this.input,s=this.c;return t&&("number"==typeof t.p&&(o=t.p),"number"==typeof t.v&&(o+=t.v)),2>o?(n=(a.length-this.a)/this.o[2],r=258*(n/2)|0,i=r<s.length?s.length+r:s.length<<1):i=s.length*o,l?(e=new Uint8Array(i),e.set(s)):e=s,this.c=e},n.prototype.n=function(){var t,e,n,i,r,o=0,a=this.c,s=this.g,c=new(l?Uint8Array:Array)(this.l+(this.b-32768));if(0===s.length)return l?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(e=0,n=s.length;n>e;++e)for(t=s[e],i=0,r=t.length;r>i;++i)c[o++]=t[i];for(e=32768,n=this.b;n>e;++e)c[o++]=a[e];return this.g=[],this.buffer=c},n.prototype.w=function(){var t,e=this.b;return l?this.s?(t=new Uint8Array(e),t.set(this.c.subarray(0,e))):t=this.c.subarray(0,e):(this.c.length>e&&(this.c.length=e),t=this.c),this.buffer=t},a.prototype.k=function(){var t,e,n=this.input;if(t=this.r.k(),this.a=this.r.a,this.B){e=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var i=t;if("string"==typeof i){var r,o,a=i.split("");for(r=0,o=a.length;o>r;r++)a[r]=(255&a[r].charCodeAt(0))>>>0;i=a}for(var s,l=1,c=0,u=i.length,f=0;u>0;){s=u>1024?1024:u,u-=s;do l+=i[f++],c+=l;while(--s);l%=65521,c%=65521}if(e!==(c<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return t};var E=8;t("Zlib.Inflate",a),t("Zlib.Inflate.prototype.decompress",a.prototype.k);var U,C,P,N,B={ADAPTIVE:f.t,BLOCK:f.u};if(Object.keys)U=Object.keys(B);else for(C in U=[],P=0,B)U[P++]=C;for(P=0,N=U.length;N>P;++P)C=U[P],t("Zlib.Inflate.BufferType."+C,B[C])}.call(this),angular.module("hotissue.services",[]).factory("DownloadService",["$q","$http","IMUtil",function(t,e,n){function i(){if(!u){u=t.defer();{e.get(encodeURI(l),{responseType:"arraybuffer"}).success(function(t){try{var e=new Uint8Array(t),i=new Zlib.Inflate(e),r=i.decompress();u.resolve(n.ab2str(r)),u=null}catch(o){u.reject("error"),u=null}}).error(function(){u.reject("error"),u=null})}return u.promise}return null}function r(){u&&(u.reject("cancel"),u=null)}function o(i){if(!f){f=t.defer();{var r=encodeURI(c+i);e.get(r,{responseType:"arraybuffer"}).success(function(t){try{var e=new Uint8Array(t),i=new Zlib.Inflate(e),r=i.decompress();f.resolve(n.ab2str(r)),f=null}catch(o){f.reject("error"),f=null}}).error(function(){f.reject("error"),f=null})}return f.promise}return null}function a(){f&&(f.reject("cancel"),f=null)}var s=!1,l="http://hotissue.imapp.kr/get.dat",c="http://hotissue-back.imapp.kr/?k=";s&&(l="http://test-hotissue.imapp.kr/get.dat",c="http://test-hotissue-back.imapp.kr/?k=");var u=null,f=null;return{download:i,download2:o,cancel:r,cancel2:a}}]).factory("SiteService",function(){function t(){return["naver","daum","google","nate","zum"]}return{all:t}});