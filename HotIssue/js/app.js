var admob_ios_key="ca-app-pub-3241952602337815/2647907833",admob_android_key="ca-app-pub-3241952602337815/5629360632",admob_wp_key="ca-app-pub-3241952602337815/5601374237",app=angular.module("hotissue",["ionic","ui.router","hotissue.services","hotissue.controllers","ngTranslate","inapp.util"]);app.config(["$compileProvider","$translateProvider",function(t,e){t.imgSrcSanitizationWhitelist("img"),e.translations("en_EN",{RATE_IT:"Rate It!"}),e.translations("ko_KR",{RATE_IT:"평가하기"}),e.uses("ko_KR")}]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("hotissue",{url:"/",templateUrl:"templates/home.html",onEnter:["$rootScope",function(t){t.$broadcast("enterHome")}]}).state("content",{url:"/content",templateUrl:"templates/content.html",onEnter:["$rootScope",function(t){t.$broadcast("enterContent")}]}),e.otherwise("/")}]),angular.module("hotissue.controllers",[]).controller("HotIssueCtrl",["$scope","$ionicActionSheet","$ionicLoading","$ionicScrollDelegate","SiteService","DownloadService","$ionicPopup","$ionicScrollDelegate","$ionicPlatform","$ionicSlideBoxDelegate","$timeout","$state","IMUtil",function(t,e,i,n,r,o,a,n,s,l,c,f,u){function h(){}function d(){json=window.localStorage.getItem("favorites"),t.favorites=JSON.parse(json),t.favorites?t.favoriteCount=t.favorites.length:(t.favorites=[],t.favoriteCount=0)}function p(t){t.length>20&&t.shift(),window.localStorage.setItem("favorites",JSON.stringify(t))}function g(){t.showLoading(),o.download().then(function(e){t.datas=JSON.parse(e).rank,t.sites=r.all(),t.hideLoading()},function(){t.hideLoading();var e=u.showConfirm("실시간 검색어","오류가 발생했습니다. 재시도 하시겠습니까?");e.then(function(t){t===!0?c(g(),1):navigator.app.exitApp()})})}function v(e){t.showLoading(),o.download2(e).then(function(i){i?t.item=JSON.parse(i):(t.item.k=e,t.item.v="데이터를 가져오기 실패했습니다. 자세히 보기를 눌러보세요.."),t.hideLoading()},function(){t.hideLoading();var i=u.showConfirm("실시간 검색어","오류가 발생했습니다. 재시도 하시겠습니까?");i.then(function(t){t===!0?c(v(e),1):navigator.app.exitApp()})})}t.addFavorite=function(e){var i=5===t.slideIndex?"즐겨찾기에서 삭제하시겠습니까 ?":"즐겨찾기에 추가하시겠습니까 ?",n=u.showConfirm("실시간 검색어",i);n.then(function(i){i===!0&&(5===t.slideIndex?(t.favoriteCount--,t.favorites.splice(e,1),l.update(),p(t.favorites)):(t.favoriteCount++,t.favorites.push(t.datas[e]),l.update(),p(t.favorites)))})},document.addEventListener("backbutton",h,!1),s.ready(function(){t.isPhoneGap=u.getPlatformID(),l.update(),u.adBanner(),d(),c(g(),1)});var b=["naver","daum","google","nate","zum","favorite","setting"],w=["bar-royal","bar-positive","bar-dark","bar-balanced","bar-energized","bar-calm","bar-stable"];t.slideIndex=0,t.maxIndex=6,t.slideTitle=b[t.slideIndex],t.barType="bar-royal",t.favorites=[],t.favoriteCount=0,t.datas=[],t.Devices=u.Const,t.item={},t.itemUrl="",t.isContent=!1,t.slidePage=function(e){n.scrollTop(),t.slideTitle=b[e],t.slideIndex=e,t.barType=w[e],t.FavoriteText=5===e?"즐겨찾기":""},t.slideAction=function(){u.getPlatformID()!==u.Const.ID_WP&&t.isContent===!1&&e.show({buttons:[{text:'<img src="img/'+b[0]+'_s.png"/>'},{text:"<img src='img/"+b[1]+"_s.png'/>"},{text:"<img src='img/"+b[2]+"_s.png'/>"},{text:"<img src='img/"+b[3]+"_s.png'/>"},{text:"<img src='img/"+b[4]+"_s.png'/>"},{text:"<img src='img/"+b[5]+".png'/>"}],cancelText:"취소",cancel:function(){},buttonClicked:function(e){return l.slide(e),t.slidePage(e),!0}})},t.isShowLeft=function(){return 0!==t.slideIndex?!1:!0},t.isShowRight=function(){return t.slideIndex!==t.maxIndex?!1:!0},t.slideLeft=function(){n.scrollTop(),l.previous()},t.slideRight=function(){n.scrollTop(),l.next()},t.showLoading=function(){u.showLoading("<div class='padding'><i class='icon ion-loading-a'></i></div>읽어오는중 ..")},t.hideLoading=u.hideLoading,t.openBrowser=function(t){u.openBrowser(t)},t.openBrowser2=function(e){t.item={},t.itemUrl=t.datas[e].url,f.go("content"),c(v(t.datas[e].title),1)},t.openBrowser3=function(){u.openBrowser(t.itemUrl)},t.sendEmail=function(){u.sendFeedBack("Feedback from HotIssue : ")},t.settings=function(){if(window.plugins&&window.plugins.Settings){var t=window.plugins.Settings;t.show(function(){},function(){})}},t.$on("enterContent",function(){t.isContent=!0}),t.$on("enterHome",function(){c(function(){ionic.DomUtil.ready(function(){t.isContent=!1,l.slide(t.slideIndex),t.slidePage(t.slideIndex)})})})}]).directive("favorite",["$ionicGesture",function(t){return{restrict:"C",require:"^ngController",link:function(e,i){var n=function(){e.addFavorite(i.attr("data-index"))},r=t.on("hold",n,i);e.$on("$destroy",function(){t.off(r,"hold",n)})}}}]),angular.module("ngTranslate",["ng"]).config(["$provide",function(t){$TranslateProvider=function(){var t,e={};this.translations=function(t,i){if(!t&&!i)return e;if(t&&!i){if(angular.isString(t))return e[t];e=t}else e[t]=i},this.uses=function(i){if(!i)return t;if(!e[i])throw Error("$translateProvider couldn't find translationTable for langKey: '"+i+"'");t=i},this.$get=["$interpolate","$log",function(i,n){return $translate=function(r,o){var a=t?e[t][r]:e[r];return a?i(a)(o):(n.warn("Translation for "+r+" doesn't exist"),r)}}]},t.provider("$translate",$TranslateProvider)}]),angular.module("ngTranslate").directive("translate",["$filter","$interpolate",function(t,e){var i=t("translate");return{restrict:"A",scope:!0,link:function(t,n,r){r.$observe("translate",function(i){t.translationId=angular.equals(i,"")?e(n.text())(t.$parent):i}),r.$observe("values",function(e){t.interpolateParams=e}),t.$watch("translationId + interpolateParams",function(){n.html(i(t.translationId,t.interpolateParams))})}}}]),angular.module("ngTranslate").filter("translate",["$parse","$translate",function(t,e){return function(i,n){return angular.isObject(n)||(n=t(n)()),e(i,n)}}]),angular.module("inapp.util",[]).factory("IMUtil",["$ionicLoading","$ionicPopup","$interval",function(t,e,i){function n(){switch(g){case v.ID_ANDROID:return admob_android_key;case v.ID_IOS:return admob_ios_key;case v.ID_WP:return admob_wp_key;case v.ID_FFOS:}return""}function r(){if(window.plugins&&window.plugins.AdMob){var t=n(),e=window.plugins.AdMob;e.createBannerView({publisherId:t,adSize:e.AD_SIZE.SMART_BANNER,bannerAtTop:!1},function(){e.requestAd({isTesting:!1},function(){e.showAd(!0)},function(){console.log("failed to request ad")})},function(){console.log("failed to create banner view")})}else console.log("AdMob plugin not available/ready.")}function o(){if(window.plugins&&window.plugins.AdMob){var t=n(),e=window.plugins.AdMob;e.createInterstitialView({publisherId:t},function(){e.requestInterstitialAd({isTesting:!1},function(){e.showAd(!0)},function(){console.log("failed to request ad")})},function(){console.log("failed to create banner view")})}}function a(t){d(t);var e=i(function(){p(),i.cancel(e)},3e3)}function s(t,i){var n=e.confirm({title:t,template:i});return n}function l(){if("undefined"!=typeof device)switch(device.platform){case"Android":return g=v.ID_ANDROID,v.ID_ANDROID;case"iOS":return g=v.ID_IOS,v.ID_IOS;case"WinCE":case"Win32NT":return g=v.ID_WP,v.ID_WP}return g=v.ID_WEB,v.ID_WEB}function c(t){g===v.ID_WEB?window.open(t):window.open(t,"_system")}function f(t){var e,i,n,r,o,a;for(e="",n=t.length,i=0;n>i;)switch(r=t[i++],r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(r);break;case 12:case 13:o=t[i++],e+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=t[i++],a=t[i++],e+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&a)<<0)}return e}function u(t){for(var e=new Uint8Array(t.length),i=0,n=t.length;n>i;++i)e[i]=t.charCodeAt(i);return e}function h(t){window.plugin&&window.plugin.email?window.plugin.email.isServiceAvailable(function(e){e?window.plugin.email.open({to:["imapp.help@gmail.com"],subject:"Hybrid Feedback",body:t}):c("mailto:imapp.help@gmail.com")}):c("mailto:imapp.help@gmail.com")}function d(e){t.show({content:e,animation:"fade-in",showBackdrop:!0,maxWidth:300,showDelay:500})}function p(){t.hide()}var g,v={ID_WEB:0,ID_ANDROID:1,ID_IOS:2,ID_WP:3,ID_FFOS:4};return{Const:v,adBanner:r,openBrowser:c,getPlatformID:l,showConfirm:s,adInterstitial:o,ab2str:f,str2ab:u,sendFeedBack:h,showLoading:d,hideLoading:p,toast:a}}]).directive("integer",function(){return{restrict:"A",require:"ngModel",link:function(t,e,i,n){n.$parsers.push(function(t){if(void 0===t)return"";var e=t.replace(/[^0-9]/g,"");return parseInt(e)<i.min&&(e=i.min),parseInt(e)>i.max&&(e=e.slice(0,-1)),e!==t&&(n.$setViewValue(e),n.$render()),console.log(parseInt(e)+"::"+i.min+":::"+i.max),e})}}}),function(){"use strict";function t(t,e){var i=t.split("."),n=s;!(i[0]in n)&&n.execScript&&n.execScript("var "+i[0]);for(var r;i.length&&(r=i.shift());)i.length||void 0===e?n=n[r]?n[r]:n[r]={}:n[r]=e}function e(t){var e,i,n,r,o,a,s,c,f,u,h=t.length,d=0,p=Number.POSITIVE_INFINITY;for(c=0;h>c;++c)t[c]>d&&(d=t[c]),t[c]<p&&(p=t[c]);for(e=1<<d,i=new(l?Uint32Array:Array)(e),n=1,r=0,o=2;d>=n;){for(c=0;h>c;++c)if(t[c]===n){for(a=0,s=r,f=0;n>f;++f)a=a<<1|1&s,s>>=1;for(u=n<<16|c,f=a;e>f;f+=o)i[f]=u;++r}++n,r<<=1,o<<=1}return[i,d,p]}function i(t,e){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=l?new Uint8Array(t):t,this.m=!1,this.i=f,this.s=!1,(e||!(e={}))&&(e.index&&(this.a=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.s=e.resize)),this.i){case c:this.b=32768,this.c=new(l?Uint8Array:Array)(32768+this.h+258);break;case f:this.b=0,this.c=new(l?Uint8Array:Array)(this.h),this.e=this.A,this.n=this.w,this.j=this.z;break;default:throw Error("invalid inflate mode")}}function n(t,e){for(var i,n=t.f,r=t.d,o=t.input,a=t.a,s=o.length;e>r;){if(a>=s)throw Error("input buffer is broken");n|=o[a++]<<r,r+=8}return i=n&(1<<e)-1,t.f=n>>>e,t.d=r-e,t.a=a,i}function r(t,e){for(var i,n,r=t.f,o=t.d,a=t.input,s=t.a,l=a.length,c=e[0],f=e[1];f>o&&!(s>=l);)r|=a[s++]<<o,o+=8;return i=c[r&(1<<f)-1],n=i>>>16,t.f=r>>n,t.d=o-n,t.a=s,65535&i}function o(t){function i(t,e,i){var o,a,s,l=this.q;for(s=0;t>s;)switch(o=r(this,e)){case 16:for(a=3+n(this,2);a--;)i[s++]=l;break;case 17:for(a=3+n(this,3);a--;)i[s++]=0;l=0;break;case 18:for(a=11+n(this,7);a--;)i[s++]=0;l=0;break;default:l=i[s++]=o}return this.q=l,i}var o,a,s,c,f=n(t,5)+257,u=n(t,5)+1,h=n(t,4)+4,d=new(l?Uint8Array:Array)(g.length);for(c=0;h>c;++c)d[g[c]]=n(t,3);if(!l)for(c=h,h=d.length;h>c;++c)d[g[c]]=0;o=e(d),a=new(l?Uint8Array:Array)(f),s=new(l?Uint8Array:Array)(u),t.q=0,t.j(e(i.call(t,f,o,a)),e(i.call(t,u,o,s)))}function a(t,e){var n,r;switch(this.input=t,this.a=0,(e||!(e={}))&&(e.index&&(this.a=e.index),e.verify&&(this.B=e.verify)),n=t[this.a++],r=t[this.a++],15&n){case U:this.method=U;break;default:throw Error("unsupported compression method")}if(0!==((n<<8)+r)%31)throw Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.r=new i(t,{index:this.a,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}var s=this,l="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView,c=0,f=1,u={u:c,t:f};i.prototype.k=function(){for(;!this.m;){var t=n(this,3);switch(1&t&&(this.m=!0),t>>>=1){case 0:var e=this.input,i=this.a,r=this.c,a=this.b,s=e.length,u=void 0,h=void 0,d=r.length,p=void 0;if(this.d=this.f=0,i+1>=s)throw Error("invalid uncompressed block header: LEN");if(u=e[i++]|e[i++]<<8,i+1>=s)throw Error("invalid uncompressed block header: NLEN");if(h=e[i++]|e[i++]<<8,u===~h)throw Error("invalid uncompressed block header: length verify");if(i+u>e.length)throw Error("input buffer is broken");switch(this.i){case c:for(;a+u>r.length;){if(p=d-a,u-=p,l)r.set(e.subarray(i,i+p),a),a+=p,i+=p;else for(;p--;)r[a++]=e[i++];this.b=a,r=this.e(),a=this.b}break;case f:for(;a+u>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(l)r.set(e.subarray(i,i+u),a),a+=u,i+=u;else for(;u--;)r[a++]=e[i++];this.a=i,this.b=a,this.c=r;break;case 1:this.j(D,T);break;case 2:o(this);break;default:throw Error("unknown BTYPE: "+t)}}return this.n()};var h,d,p=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],g=l?new Uint16Array(p):p,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],b=l?new Uint16Array(v):v,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],m=l?new Uint8Array(w):w,y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],I=l?new Uint16Array(y):y,A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=l?new Uint8Array(A):A,$=new(l?Uint8Array:Array)(288);for(h=0,d=$.length;d>h;++h)$[h]=143>=h?8:255>=h?9:279>=h?7:8;var S,_,D=e($),x=new(l?Uint8Array:Array)(30);for(S=0,_=x.length;_>S;++S)x[S]=5;var T=e(x);i.prototype.j=function(t,e){var i=this.c,o=this.b;this.o=t;for(var a,s,l,c,f=i.length-258;256!==(a=r(this,t));)if(256>a)o>=f&&(this.b=o,i=this.e(),o=this.b),i[o++]=a;else for(s=a-257,c=b[s],0<m[s]&&(c+=n(this,m[s])),a=r(this,e),l=I[a],0<k[a]&&(l+=n(this,k[a])),o>=f&&(this.b=o,i=this.e(),o=this.b);c--;)i[o]=i[o++-l];for(;8<=this.d;)this.d-=8,this.a--;this.b=o},i.prototype.z=function(t,e){var i=this.c,o=this.b;this.o=t;for(var a,s,l,c,f=i.length;256!==(a=r(this,t));)if(256>a)o>=f&&(i=this.e(),f=i.length),i[o++]=a;else for(s=a-257,c=b[s],0<m[s]&&(c+=n(this,m[s])),a=r(this,e),l=I[a],0<k[a]&&(l+=n(this,k[a])),o+c>f&&(i=this.e(),f=i.length);c--;)i[o]=i[o++-l];for(;8<=this.d;)this.d-=8,this.a--;this.b=o},i.prototype.e=function(){var t,e,i=new(l?Uint8Array:Array)(this.b-32768),n=this.b-32768,r=this.c;if(l)i.set(r.subarray(32768,i.length));else for(t=0,e=i.length;e>t;++t)i[t]=r[t+32768];if(this.g.push(i),this.l+=i.length,l)r.set(r.subarray(n,n+32768));else for(t=0;32768>t;++t)r[t]=r[n+t];return this.b=32768,r},i.prototype.A=function(t){var e,i,n,r,o=this.input.length/this.a+1|0,a=this.input,s=this.c;return t&&("number"==typeof t.p&&(o=t.p),"number"==typeof t.v&&(o+=t.v)),2>o?(i=(a.length-this.a)/this.o[2],r=258*(i/2)|0,n=r<s.length?s.length+r:s.length<<1):n=s.length*o,l?(e=new Uint8Array(n),e.set(s)):e=s,this.c=e},i.prototype.n=function(){var t,e,i,n,r,o=0,a=this.c,s=this.g,c=new(l?Uint8Array:Array)(this.l+(this.b-32768));if(0===s.length)return l?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(e=0,i=s.length;i>e;++e)for(t=s[e],n=0,r=t.length;r>n;++n)c[o++]=t[n];for(e=32768,i=this.b;i>e;++e)c[o++]=a[e];return this.g=[],this.buffer=c},i.prototype.w=function(){var t,e=this.b;return l?this.s?(t=new Uint8Array(e),t.set(this.c.subarray(0,e))):t=this.c.subarray(0,e):(this.c.length>e&&(this.c.length=e),t=this.c),this.buffer=t},a.prototype.k=function(){var t,e,i=this.input;if(t=this.r.k(),this.a=this.r.a,this.B){e=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var n=t;if("string"==typeof n){var r,o,a=n.split("");for(r=0,o=a.length;o>r;r++)a[r]=(255&a[r].charCodeAt(0))>>>0;n=a}for(var s,l=1,c=0,f=n.length,u=0;f>0;){s=f>1024?1024:f,f-=s;do l+=n[u++],c+=l;while(--s);l%=65521,c%=65521}if(e!==(c<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return t};var U=8;t("Zlib.Inflate",a),t("Zlib.Inflate.prototype.decompress",a.prototype.k);var C,E,P,B,L={ADAPTIVE:u.t,BLOCK:u.u};if(Object.keys)C=Object.keys(L);else for(E in C=[],P=0,L)C[P++]=E;for(P=0,B=C.length;B>P;++P)E=C[P],t("Zlib.Inflate.BufferType."+E,L[E])}.call(this),angular.module("hotissue.services",[]).factory("DownloadService",["$q","$http","IMUtil",function(t,e,i){function n(){{var n=t.defer();e.get(encodeURI("http://hotissue.imapp.kr/get.dat"),{responseType:"arraybuffer"}).success(function(t){try{var e=new Uint8Array(t),r=new Zlib.Inflate(e),o=r.decompress();n.resolve(i.ab2str(o))}catch(a){n.reject("error")}}).error(function(){n.reject("error")})}return n.promise}function r(n){var r=t.defer(),o=encodeURI("http://hotissue-back.imapp.kr/?k="+n);console.log(o);e.get(o,{responseType:"arraybuffer"}).success(function(t){try{var e=new Uint8Array(t),n=new Zlib.Inflate(e),o=n.decompress();r.resolve(i.ab2str(o))}catch(a){r.reject("error")}}).error(function(){r.reject("error")});return r.promise}return{download:n,download2:r}}]).factory("SiteService",function(){function t(){return["naver","daum","google","nate","zum"]}return{all:t}});